(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(35),i=n.n(s),c=n(17),o=n(2),u=n(3),l=n(5),d=n(4),h=n(8),j=n(6),b=n.n(j),m=n(9),p=n(7),O=n.n(p),f=n(0),v=Object(a.createContext)(),x=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:void 0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setAuthContext()}},{key:"setAuthContext",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getUserInfo().then((function(e){t.setState({user:e})})).catch((function(e){t.setState({user:null})}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O.a.defaults.withCredentials=!0,e.next=3,O()({method:"GET",url:"/user",withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(f.jsx)(v.Provider,{value:this.state.user,children:this.props.children})}}]),n}(a.Component),g=n(37),w=n(12);n(62);var y=function(e){var t=e.answer,n=e.answerChecker,r=e.correctAnswer,s=Object(a.useState)(""),i=Object(w.a)(s,2),c=i[0],o=i[1];return Object(f.jsx)("button",{className:t===c?"green answer-button":"answer-button",onClick:function(){o(r),setTimeout((function(){n(t)}),300)},children:t})};n(63);var k=function(e){var t=e.question,n=e.answers,a=e.correctAnswer,r=e.answerChecker,s=e.questionNumber,i=e.score;return Object(f.jsxs)("div",{className:"quiz-template",children:[Object(f.jsx)("div",{className:"question-container",children:Object(f.jsx)("h1",{className:"question",children:t})}),Object(f.jsx)("div",{className:"answer-container",children:function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n--;var a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e}(n).map((function(e,t){return Object(f.jsx)(y,{answer:e,answerChecker:r,correctAnswer:a},t)}))}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("p",{children:[" question ",s]}),Object(f.jsxs)("p",{children:["Score:",i]})]})]})},S=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"toggleQuiz",value:function(){}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{className:"quiz-results card",children:[Object(f.jsx)("div",{className:"header",children:Object(f.jsx)("h1",{children:"Quiz Results"})}),Object(f.jsxs)("div",{className:"main",children:[Object(f.jsx)("p",{children:"Congratulations for finishing your quiz!"}),Object(f.jsx)("p",{children:"Your score was:"}),Object(f.jsx)("h2",{children:this.props.score}),Object(f.jsx)("p",{children:"Share it with your friends:"}),Object(f.jsx)("a",{href:this.props.shareLink,children:this.props.shareLink})]}),Object(f.jsx)("button",{onClick:function(){return e.props.setDone(!1)},children:"take again"}),Object(f.jsx)("button",{onClick:function(){return e.props.setDone(!1)},children:Object(f.jsx)(c.b,{to:"/homepage",children:"Home"})})]})}}]),n}(a.Component);n(72);var C=function(){var e=Object(h.h)().type,t=Object(h.g)(),n=!1,r=Object(a.useState)(!1),s=Object(w.a)(r,2),i=s[0],c=s[1],o=Object(a.useState)(""),u=Object(w.a)(o,2),l=u[0],d=u[1],j=Object(a.useState)([]),p=Object(w.a)(j,2),v=p[0],x=p[1],y=Object(a.useState)(0),C=Object(w.a)(y,2),N=C[0],E=C[1],A=Object(a.useState)(""),D=Object(w.a)(A,2),L=D[0],T=D[1],U=Object(a.useState)([]),H=Object(w.a)(U,2),M=H[0],q=H[1],F=Object(a.useState)(""),G=Object(w.a)(F,2),I=G[0],z=G[1],P=Object(a.useState)(0),B=Object(w.a)(P,2),R=B[0],J=B[1];function K(){console.log(N),N<9&&E((function(e){return e+1}))}function Q(){return(Q=Object(m.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("wasScoreSaved",n),!n){t.next=3;break}return t.abrupt("return");case 3:return n=!0,t.prev=4,t.next=7,O.a.post("/save-score",{points:R,date:new Date,topic:"general"===e?9:Number(e)},{withCredentials:!0});case 7:return a=t.sent,console.log("User score saved."),t.abrupt("return",a.data);case 12:throw t.prev=12,t.t0=t.catch(4),n=!1,console.log(t.t0),new Error("Could not save user score.");case 17:case"end":return t.stop()}}),t,null,[[4,12]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!1===i&&(J(0),function(){var t="general"===e?9:e;return O.a.get("https://opentdb.com/api.php?amount=10&category=".concat(t,"&type=multiple&encode=base64"),{withCredentials:!1})}().then((function(e){x(e.data.results)})))}),[e,i]),Object(a.useEffect)((function(){!function(){if(v.length>0&&N<=9){var e=v[N],t=atob(e.question),n=e.incorrect_answers.map(atob),a=atob(e.correct_answer);T(t),q([].concat(Object(g.a)(n),[a])),z(a)}}()}),[v,N]),Object(f.jsx)("div",{className:"quiz-page",children:i?Object(f.jsx)(S,{score:R,shareLink:l,setDone:c,done:i,type:e}):Object(f.jsx)(k,{question:L,answers:M,correctAnswer:I,answerChecker:function(n){9===N&&(c(!0),E(0),T(""),x([]),q([]),function(){return Q.apply(this,arguments)}().then((function(e){var t,n=(t=null===e||void 0===e?void 0:e._id,window.location.origin+"/share/"+t);d(n)})),setTimeout((function(){t.push("/quizpage/".concat(e))}),1e3)),N>9||(n===I?(J((function(e){return e+1})),K()):K())},questionNumber:N+1,score:R})})};n(73),n(74);var N=function(e){var t=e.title,n=e.buttonName,a=e.link;return Object(f.jsxs)("div",{className:"box",children:[Object(f.jsx)("h1",{className:"box-title",children:t}),Object(f.jsx)(c.b,{to:"/".concat(a),children:Object(f.jsx)("button",{className:"selection-btn",children:n})})]})};n(75);var E=function(){var e=Object(a.useState)(""),t=Object(w.a)(e,2),n=t[0],r=t[1],s=Object(h.g)();return Object(f.jsx)("div",{className:"topic-box",children:Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==n&&s.push("/quizpage/".concat(n))},className:"topic-form",children:[Object(f.jsx)("h1",{className:"topic-header",children:"Choose a Topic:"}),Object(f.jsx)("select",{value:n,onChange:function(e){r(e.target.value)},className:"topic-select",children:[{id:9,name:"General Knowledge"},{id:10,name:"Entertainment: Books"},{id:11,name:"Entertainment: Film"},{id:12,name:"Entertainment: Music"},{id:13,name:"Entertainment: Musicals & Theatres"},{id:14,name:"Entertainment: Television"},{id:15,name:"Entertainment: Video Games"},{id:16,name:"Entertainment: Board Games"},{id:17,name:"Science & Nature"},{id:18,name:"Science: Computers"},{id:19,name:"Science: Mathematics"},{id:20,name:"Mythology"},{id:21,name:"Sports"},{id:22,name:"Geography"},{id:23,name:"History"},{id:24,name:"Politics"},{id:25,name:"Art"},{id:26,name:"Celebrities"},{id:27,name:"Animals"},{id:28,name:"Vehicles"},{id:29,name:"Entertainment: Comics"},{id:30,name:"Science: Gadgets"},{id:31,name:"Entertainment: Japanese Anime & Manga"},{id:32,name:"Entertainment: Cartoon & Animations"}].map((function(e){return Object(f.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(f.jsx)("button",{type:"submit",className:"topic-btn",children:"Begin"})]})})};var A=function(){return Object(f.jsx)("div",{className:"homepage",children:Object(f.jsx)("div",{className:"homepage-inner",children:Object(f.jsxs)("div",{className:"homepage-boxes",children:[Object(f.jsx)(N,{title:"General Knowledge Quiz",buttonName:"BEGIN",link:"quizpage/general"}),Object(f.jsx)(E,{})]})})})},D=n(11),L=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).autoLogin=a.autoLogin.bind(Object(D.a)(a)),a}return Object(u.a)(n,[{key:"autoLogin",value:function(){O.a.post("/login",{email:"autologin@email.com",password:"autologin"},{withCredentials:!0}).then((function(){return window.location.href="/"})).catch((function(e){throw console.log(e),new Error("Auto login failed")}))}},{key:"render",value:function(){return Object(f.jsx)("button",{type:"button",className:"submit-btn",onClick:this.autoLogin,children:"Auto Login (Dev)"})}}]),n}(a.Component),T=n(19);var U=function(e){return Object(f.jsx)("input",{name:"name",type:"text",label:"name",placeholder:"name",className:"form-input",disabled:e.disabled,value:e.value,onChange:e.changeHandler})};var H=function(e){return Object(f.jsx)("input",{name:"email",type:"email",label:"email",placeholder:"email",className:"form-input",disabled:e.disabled,value:e.value,onChange:e.changeHandler})};var M=function(e){return Object(f.jsx)("input",{name:"password",type:"password",label:"password",placeholder:"password",className:"form-input",disabled:e.disabled,value:e.value,onChange:e.changeHandler})};var q=function(e){return Object(f.jsx)("input",{name:"submit",type:"submit",label:"submit",value:e.value||"Submit",disabled:e.disabled,className:e.disabled?" disabled-btn":"submit-btn"})},F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).fieldComponents={name:U,email:H,password:M},e}return Object(u.a)(n,[{key:"renderChosenFields",value:function(){var e=this;return this.props.fields.map((function(t){if(e.fieldExists(t)){var n=e.getFieldComponent(t);return Object(f.jsx)(n,{value:e.props[t],changeHandler:e.props.changeHandler,disabled:e.fieldIsDisabled(t)},t)}throw new Error("The '".concat(t,"' field does not exists."))}))}},{key:"fieldExists",value:function(e){return e in this.fieldComponents}},{key:"getFieldComponent",value:function(e){return this.fieldComponents[e]}},{key:"fieldIsDisabled",value:function(e){return this.props.disabled.includes(e)}},{key:"renderSubmit",value:function(){return Object(f.jsx)(q,{value:this.props.submit,disabled:this.fieldIsDisabled("submit")})}},{key:"render",value:function(){return Object(f.jsxs)("form",{method:this.props.method,action:this.props.action,onSubmit:this.props.submitHandler,className:"user-form",autoComplete:"off",children:[this.renderChosenFields(),this.renderSubmit()]})}}]),n}(a.Component),G=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"status-msg",children:this.props.message})}}]),n}(a.Component),I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).fields=["email","password"],a.disabled=[],a.state={status:"",email:"",password:""},a.handleSubmit=a.handleSubmit.bind(Object(D.a)(a)),a.handleChange=a.handleChange.bind(Object(D.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(T.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.login().then((function(e){console.log(e),window.location.href="/"})).catch((function(e){return t.setStatus(e)}))}},{key:"login",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O()({method:"POST",url:"/login",data:{email:this.state.email,password:this.state.password},validateStatus:function(e){return 200===e}});case 3:return t=e.sent,console.log(t),e.abrupt("return",t);case 8:if(e.prev=8,e.t0=e.catch(0),console.log(e.t0),401!==e.t0.response.status){e.next=15;break}throw new Error("Email or password incorrect.");case 15:throw new Error("Unknown login error.");case 16:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"setStatus",value:function(e){this.setState({status:e.message})}},{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(G,{message:this.state.status}),Object(f.jsx)(F,{fields:this.fields,disabled:this.disabled,email:this.state.email,password:this.state.password,submit:"Enter",submitHandler:this.handleSubmit,changeHandler:this.handleChange})]})}}]),n}(a.Component),z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"login-page card",children:[Object(f.jsx)("div",{className:"header",children:Object(f.jsx)("h1",{children:"Login"})}),Object(f.jsxs)("div",{className:"main",children:[Object(f.jsx)(I,{}),Object(f.jsx)(L,{})]})]})}}]),n}(a.Component),P=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).fields=["name","email","password"],a.disabled=[],a.state={status:"",name:"",email:"",password:""},a.handleSubmit=a.handleSubmit.bind(Object(D.a)(a)),a.handleChange=a.handleChange.bind(Object(D.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(T.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.register().then((function(){return window.location.href="/login"})).catch((function(e){return t.setStatus(e)}))}},{key:"register",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O()({method:"POST",url:"/sign-up",data:{name:this.state.name,email:this.state.email,password:this.state.password}});case 3:return t=e.sent,e.abrupt("return",t);case 7:if(e.prev=7,e.t0=e.catch(0),409!==e.t0.response.status){e.next=14;break}throw new Error("Email already registered.");case 14:throw new Error("Unknown registration error.");case 15:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"setStatus",value:function(e){this.setState({status:e.message})}},{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(G,{message:this.state.status}),Object(f.jsx)(F,{fields:this.fields,disabled:this.disabled,name:this.state.name,email:this.state.email,password:this.state.password,submit:"Sign Up",submitHandler:this.handleSubmit,changeHandler:this.handleChange})]})}}]),n}(a.Component),B=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"sign-up-page card",children:[Object(f.jsx)("div",{className:"header",children:Object(f.jsx)("h1",{children:"Sign Up"})}),Object(f.jsx)("div",{className:"main",children:Object(f.jsx)(P,{})})]})}}]),n}(a.Component),R=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).fields=["name","email","password"],a.state={status:"",name:"",email:"",password:"",disabled:["email","submit"]},a.handleSubmit=a.handleSubmit.bind(Object(D.a)(a)),a.handleChange=a.handleChange.bind(Object(D.a)(a)),a.setStatus=a.setStatus.bind(Object(D.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(T.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setStatus(""),this.editUserInfo().then((function(){return t.setStatus("Successfully saved.")})).catch((function(e){return t.setStatus(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.loadUserInfoToFields().then((function(){return e.enableSubmission()})).catch((function(t){return e.setStatus(t.message)}))}},{key:"editUserInfo",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/edit",{name:this.state.name,password:this.state.password},{withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not save user information.");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadUserInfoToFields",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserInfo();case 2:(t=e.sent)&&this.setState({name:t.name,email:t.email});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/user");case 3:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to load user info.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"enableSubmission",value:function(){this.setState((function(e){return{disabled:e.disabled.filter((function(e){return"submit"!==e}))}}))}},{key:"setStatus",value:function(e){this.setState({status:e})}},{key:"render",value:function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(G,{message:this.state.status}),Object(f.jsx)(F,{fields:this.fields,disabled:this.state.disabled,method:"post",action:"/edit",name:this.state.name,email:this.state.email,password:this.state.password,submit:"Save",submitHandler:this.handleSubmit,changeHandler:this.handleChange})]})}}]),n}(a.Component),J=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"edit-page card",children:[Object(f.jsx)("div",{className:"header",children:Object(f.jsx)("h1",{children:"Edit Info"})}),Object(f.jsx)("div",{className:"main",children:Object(f.jsx)(R,{})})]})}}]),n}(a.Component),K=(n(76),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return O.a.post("/logout").then((function(e){console.log(e),setTimeout((function(){return window.location.href="/login"}),500)})),Object(f.jsx)("div",{className:"logout-page card",children:Object(f.jsx)("div",{className:"main",children:"Logging out..."})})}}]),n}(a.Component));n(77);var Q=function(e){return Object(f.jsx)("a",{href:e.path,className:"link-btn",children:e.text})};n(78);var V=function(e){var t=Object(a.useState)(!1),n=Object(w.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!1),c=Object(w.a)(i,2),o=c[0],u=c[1],l=function(){window.innerWidth<=640?s(!0):s(!1)};return Object(a.useEffect)((function(){window.addEventListener("resize",l)})),Object(a.useEffect)((function(){window.innerWidth<=640&&s(!0)}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("nav",{className:r?"nav-bar close-menu":" nav-bar open-menu",children:Object(f.jsx)("ul",{children:e.isAuthenticated?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)(Q,{text:"Home",path:"/"})}),Object(f.jsx)("li",{children:Object(f.jsx)(Q,{text:"Edit User",path:"/edit"})}),Object(f.jsx)("li",{children:Object(f.jsx)(Q,{text:"Previous Scores",path:"/scores"})}),Object(f.jsx)("li",{children:Object(f.jsx)(Q,{text:"Ranking",path:"/ranking"})}),Object(f.jsx)("li",{children:Object(f.jsx)(Q,{text:"Logout",path:"/logout"})})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)(Q,{text:"Login",path:"/login"})}),Object(f.jsx)("li",{children:Object(f.jsx)(Q,{text:"Sign Up",path:"/sign-up"})})]})})}),r?Object(f.jsxs)("div",{className:"mobile-menu icon",onClick:function(){s(!r),u(!o)},children:[Object(f.jsx)("div",{className:"menu-icon"}),Object(f.jsx)("div",{className:"menu-icon"}),Object(f.jsx)("div",{className:"menu-icon"})]}):Object(f.jsx)("div",{className:o?"show icon":"hide icon",onClick:function(){s(!r),u(!o)},children:"X"})]})},_=[{id:9,name:"General Knowledge"},{id:10,name:"Entertainment: Books"},{id:11,name:"Entertainment: Film"},{id:12,name:"Entertainment: Music"},{id:13,name:"Entertainment: Musicals & Theatres"},{id:14,name:"Entertainment: Television"},{id:15,name:"Entertainment: Video Games"},{id:16,name:"Entertainment: Board Games"},{id:17,name:"Science & Nature"},{id:18,name:"Science: Computers"},{id:19,name:"Science: Mathematics"},{id:20,name:"Mythology"},{id:21,name:"Sports"},{id:22,name:"Geography"},{id:23,name:"History"},{id:24,name:"Politics"},{id:25,name:"Art"},{id:26,name:"Celebrities"},{id:27,name:"Animals"},{id:28,name:"Vehicles"},{id:29,name:"Entertainment: Comics"},{id:30,name:"Science: Gadgets"},{id:31,name:"Entertainment: Japanese Anime & Manga"},{id:32,name:"Entertainment: Cartoon & Animations"}],W=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={scores:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.loadScores().then((function(t){e.setState({scores:t})}))}},{key:"loadScores",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/get-scores",{withCredentials:!0});case 3:return t=e.sent,console.log(t),e.abrupt("return",t.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0),new Error("Unable to fetch scores.");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getTopicName",value:function(e){return _.find((function(t){return t.id===e})).name}},{key:"render",value:function(){var e=this,t=this.state.scores;if(!t)return Object(f.jsx)("p",{children:"No scores to be shown."});var n=t.map((function(t,n){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t.points}),Object(f.jsx)("td",{children:new Date(t.date).toLocaleDateString()}),Object(f.jsx)("td",{children:e.getTopicName(t.topic)})]},n)}));return Object(f.jsxs)("table",{className:"table scores-table",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Score"}),Object(f.jsx)("th",{children:"Date"}),Object(f.jsx)("th",{children:"Topic"})]})}),Object(f.jsx)("tbody",{children:n}),Object(f.jsx)("tfoot",{children:Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:"3",children:"End of scores"})})})]})}}]),n}(a.Component),X=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"scores-page card",children:[Object(f.jsx)("div",{className:"header",children:Object(f.jsx)("h1",{children:"Previous Scores"})}),Object(f.jsx)("div",{className:"main",children:Object(f.jsx)(W,{})})]})}}]),n}(a.Component),Y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={scores:null,topic:"all"},a.state.scores=a.props.scores,a}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("select",{name:"topic",className:"select-topic",onChange:this.props.changeHandler,value:this.state.topic,children:[Object(f.jsx)("option",{value:"all",children:"------- ALL --------"}),_.map((function(e){return Object(f.jsx)("option",{value:e.id,default:"General Knowledge"===e.name,children:e.name},e.id)}))]})}}]),n}(a.Component),Z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={topic:"all",scores:null},a.handleChange=a.handleChange.bind(Object(D.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.loadScores().then((function(t){e.setState({scores:t})}))}},{key:"handleChange",value:function(e){this.setState({topic:e.target.value})}},{key:"loadScores",value:function(){var e=Object(m.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/get-ranking",{withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),new Error("Unable to fetch scores.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getScoresList",value:function(){var e=this,t=this.state.scores;return t?t.filter((function(t){return"all"===e.state.topic||t.topic===Number(e.state.topic)})).sort((function(e,t){return t.points-e.points})).map((function(t,n){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t.user.name}),Object(f.jsx)("td",{children:t.points}),Object(f.jsx)("td",{children:e.getTopicName(t.topic)})]},n)})):Object(f.jsx)("p",{children:"Loading..."})}},{key:"getTopicName",value:function(e){return _.find((function(t){return t.id===e})).name}},{key:"render",value:function(){var e=this.getScoresList();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Y,{scores:this.state.scores,topic:this.state.topic,changeHandler:this.handleChange}),Object(f.jsxs)("table",{className:"table ranking-table",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"User"}),Object(f.jsx)("th",{children:"Score"}),Object(f.jsx)("th",{children:"Topic"})]})}),Object(f.jsx)("tbody",{children:e}),Object(f.jsx)("tfoot",{children:Object(f.jsx)("tr",{children:Object(f.jsx)("td",{colSpan:"3",children:"End of scores"})})})]})]})}}]),n}(a.Component),$=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(f.jsxs)("div",{className:"raking-page card",children:[Object(f.jsx)("div",{className:"header",children:Object(f.jsx)("h1",{children:"Rankings"})}),Object(f.jsx)("div",{className:"main",children:Object(f.jsx)(Z,{})})]})}}]),n}(a.Component),ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={score:null,validLink:!0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props);var t=this.props.match.params.id;this.getScore(t).then((function(t){e.setState({score:t})})).catch((function(t){console.log(t),e.setState({validLink:!1})}))}},{key:"getScore",value:function(){var e=Object(m.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/get-score/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=null===(e=this.state.score)||void 0===e?void 0:e.user.name,a=null===(t=this.state.score)||void 0===t?void 0:t.points;return Object(f.jsxs)("div",{className:"share-page card",children:[Object(f.jsx)("div",{className:"header",children:Object(f.jsx)("h1",{children:"Quiz App"})}),Object(f.jsxs)("div",{className:"main",children:[this.state.validLink?n&&a&&Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("p",{children:[Object(f.jsx)("strong",{children:n})," reached a score of ",Object(f.jsx)("strong",{children:a})]})}):Object(f.jsx)("p",{children:"Could not retrieve user score."}),Object(f.jsx)("p",{children:"Can you go higher?"}),Object(f.jsx)("p",{children:Object(f.jsx)(c.b,{to:"/",children:"Click here to play"})})]})]})}}]),n}(a.Component),te=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"isAuthenticationChecked",value:function(){return void 0!==this.context}},{key:"isUserAuthenticated",value:function(){return this.context||!1}},{key:"getDefaultPrivateRoute",value:function(){return Object(f.jsx)(h.b,{path:"/",render:function(){return Object(f.jsx)(h.a,{to:"/"})}})}},{key:"getDefaultPublicRoute",value:function(){return Object(f.jsx)(h.b,{path:"/",render:function(){return Object(f.jsx)(h.a,{to:"/login"})}})}},{key:"render",value:function(){if(!this.isAuthenticationChecked())return null;var e=this.isUserAuthenticated();return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)(V,{isAuthenticated:e}),e?Object(f.jsxs)(h.d,{children:[Object(f.jsx)(h.b,{path:"/homepage",component:A}),Object(f.jsx)(h.b,{path:"/quizpage/:type",component:C}),Object(f.jsx)(h.b,{path:"/edit",component:J}),Object(f.jsx)(h.b,{path:"/scores",component:X}),Object(f.jsx)(h.b,{path:"/ranking",component:$}),Object(f.jsx)(h.b,{path:"/share/:id",component:ee}),Object(f.jsx)(h.b,{path:"/logout",component:K}),Object(f.jsx)(h.b,{exact:!0,path:"/",component:A}),this.getDefaultPrivateRoute()]}):Object(f.jsxs)(h.d,{children:[Object(f.jsx)(h.b,{path:"/share/:id",component:ee}),Object(f.jsx)(h.b,{path:"/login",component:z}),Object(f.jsx)(h.b,{path:"/sign-up",component:B}),this.getDefaultPublicRoute()]})]})}}]),n}(a.Component);te.contextType=v;var ne=te;n(79);i.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(x,{children:Object(f.jsx)(c.a,{children:Object(f.jsx)(ne,{})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.ae5187cb.chunk.js.map