(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(35),c=n.n(s),i=n(16),o=n(2),u=n(3),l=n(5),d=n(4),h=n(8),j=n(6),b=n.n(j),p=n(9),m=n(7),f=n.n(m),O=n(0),v=Object(a.createContext)(),x=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:void 0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setAuthContext()}},{key:"setAuthContext",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getUserInfo().then((function(e){t.setState({user:e})})).catch((function(e){t.setState({user:null})}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.a.defaults.withCredentials=!0,e.next=3,f()({method:"GET",url:"/user",withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(O.jsx)(v.Provider,{value:this.state.user,children:this.props.children})}}]),n}(a.Component),g=n(18),w=n(37),y=n(12);n(62),n(63);var k=function(e){var t=e.answer,n=e.answerChecker,r=e.correctAnswer,s=Object(a.useState)(""),c=Object(y.a)(s,2),i=c[0],o=c[1];return Object(O.jsx)("button",{className:t==i?"green answer-button":"answer-button",onClick:function(){o(r),setTimeout((function(){n(t)}),300)},children:t})};n(64);var S=function(e){var t=e.question,n=e.answers,a=e.correctAnswer,r=e.answerChecker,s=e.questionNumber,c=e.score;return console.log(a),Object(O.jsxs)("div",{className:"quiz-template",children:[Object(O.jsx)("div",{className:"question-container",children:Object(O.jsx)("h1",{className:"question",children:t})}),Object(O.jsx)("div",{className:"answer-container",children:function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n--;var a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e}(n).map((function(e,t){return Object(O.jsx)(k,{answer:e,answerChecker:r,correctAnswer:a},t)}))}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:[" question ",s]}),Object(O.jsxs)("p",{children:["Score:",c]})]})]})};n(65);var C=function(){var e=Object(a.useState)(""),t=Object(y.a)(e,2),n=t[0],r=t[1],s=Object(h.g)();return Object(O.jsx)("div",{className:"topic-box",children:Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==n&&s.push("/quizpage/".concat(n))},className:"topic-form",children:[Object(O.jsx)("h1",{className:"topic-header",children:"Choose a Topic:"}),Object(O.jsx)("select",{value:n,onChange:function(e){r(e.target.value)},className:"topic-select",children:[{id:9,name:"General Knowledge"},{id:10,name:"Entertainment: Books"},{id:11,name:"Entertainment: Film"},{id:12,name:"Entertainment: Music"},{id:13,name:"Entertainment: Musicals & Theatres"},{id:14,name:"Entertainment: Television"},{id:15,name:"Entertainment: Video Games"},{id:16,name:"Entertainment: Board Games"},{id:17,name:"Science & Nature"},{id:18,name:"Science: Computers"},{id:19,name:"Science: Mathematics"},{id:20,name:"Mythology"},{id:21,name:"Sports"},{id:22,name:"Geography"},{id:23,name:"History"},{id:24,name:"Politics"},{id:25,name:"Art"},{id:26,name:"Celebrities"},{id:27,name:"Animals"},{id:28,name:"Vehicles"},{id:29,name:"Entertainment: Comics"},{id:30,name:"Science: Gadgets"},{id:31,name:"Entertainment: Japanese Anime & Manga"},{id:32,name:"Entertainment: Cartoon & Animations"}].map((function(e){return Object(O.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(O.jsx)("button",{type:"submit",className:"topic-btn",children:"Begin"})]})})},N=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={},a}return Object(u.a)(n,[{key:"toggleQuiz",value:function(){}},{key:"render",value:function(){var e=this;return console.log(this.props),Object(O.jsxs)("div",{className:"quiz-results card",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("h1",{children:"Quiz Results"})}),Object(O.jsxs)("div",{className:"main",children:[Object(O.jsx)("p",{children:"Congratulations for finishing your quiz!"}),Object(O.jsx)("p",{children:"Your score was:"}),Object(O.jsx)("h2",{children:this.props.score}),Object(O.jsx)("p",{children:"Share it with your friends:"}),Object(O.jsx)("a",{href:this.props.shareLink,children:this.props.shareLink})]}),Object(O.jsx)("button",{onClick:function(){return e.props.setDone(!1)},children:"take again"}),Object(O.jsx)("button",{onClick:function(){return e.props.setDone(!1)},children:Object(O.jsx)(i.b,{to:"/homepage",children:"Home"})})]})}}]),n}(a.Component);var E=function(){var e=Object(h.h)().type,t=Object(h.g)(),n=!1,r=Object(a.useState)(!1),s=Object(y.a)(r,2),c=s[0],i=s[1],o=Object(a.useState)(""),u=Object(y.a)(o,2),l=u[0],d=u[1],j=Object(a.useState)([]),m=Object(y.a)(j,2),v=m[0],x=m[1],k=Object(a.useState)(0),C=Object(y.a)(k,2),E=C[0],A=C[1],D=Object(a.useState)(""),L=Object(y.a)(D,2),U=L[0],T=L[1],H=Object(a.useState)([]),M=Object(y.a)(H,2),q=M[0],F=M[1],G=Object(a.useState)(""),I=Object(y.a)(G,2),z=I[0],P=I[1],B=Object(a.useState)(0),R=Object(y.a)(B,2),J=R[0],K=R[1];function Q(){E<9?A((function(e){return e+1})):(A(0),i(!0),T(""),x([]),F([]),setTimeout((function(){t.push("/quizpage/".concat(e))}),1e3),n||(n=!0,V().then((function(){console.log("User score saved.")})).catch((function(e){n=!1,console.log(e)}))),V().then((function(e){var t,n=(t=null===e||void 0===e?void 0:e._id,window.location.origin+"/share/"+t);console.log(n),d(n)})))}function V(){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=2;break}return t.abrupt("return");case 2:return n=!0,t.prev=3,t.next=6,f.a.post("/save-score",Object(g.a)({points:J,date:new Date,topic:e},"topic","general"===e?9:Number(e)),{withCredentials:!0});case 6:return a=t.sent,console.log("User score saved."),t.abrupt("return",a.data);case 11:throw t.prev=11,t.t0=t.catch(3),n=!1,console.log(t.t0),new Error("Could not save user score.");case 16:case"end":return t.stop()}}),t,null,[[3,11]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){0==c&&(K(0),"general"===e?f.a.get("https://opentdb.com/api.php?amount=10&type=multiple&encode=base64",{withCredentials:!1}).then((function(e){x(e.data.results)})):"general"!==e&&f.a.get("https://opentdb.com/api.php?amount=10&category=".concat(e,"&type=multiple&encode=base64"),{withCredentials:!1}).then((function(e){x(e.data.results),console.log(e)})))}),[e,c]),Object(a.useEffect)((function(){!function(){if(v.length>0&&E<=9){T(atob(v[E].question));var e=v[E].incorrect_answers.map((function(e){return atob(e)}));F(e),F((function(e){return[].concat(Object(w.a)(e),[atob(v[E].correct_answer)])})),P(atob(v[E].correct_answer))}}()}),[v,E]),Object(O.jsx)("div",{className:"quiz-page",children:c?Object(O.jsx)(N,{score:J,shareLink:l,setDone:i,done:c,type:e}):Object(O.jsx)(S,{question:U,answers:q,correctAnswer:z,answerChecker:function(e){e===z?(K((function(e){return e+1})),Q()):Q()},questionNumber:E+1,score:J})})};n(74),n(75);var A=function(e){var t=e.title,n=e.buttonName,a=e.link;return Object(O.jsxs)("div",{className:"box",children:[Object(O.jsx)("h1",{className:"box-title",children:t}),Object(O.jsx)(i.b,{to:"/".concat(a),children:Object(O.jsx)("button",{className:"selection-btn",children:n})})]})};var D=function(){return Object(O.jsx)("div",{className:"homepage",children:Object(O.jsx)("div",{className:"homepage-inner",children:Object(O.jsxs)("div",{className:"homepage-boxes",children:[Object(O.jsx)(A,{title:"General Knowledge Quiz",buttonName:"BEGIN",link:"quizpage/general"}),Object(O.jsx)(C,{})]})})})},L=n(11),U=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).autoLogin=a.autoLogin.bind(Object(L.a)(a)),a}return Object(u.a)(n,[{key:"autoLogin",value:function(){f.a.post("/login",{email:"autologin@email.com",password:"autologin"},{withCredentials:!0}).then((function(){return window.location.href="/"})).catch((function(e){throw console.log(e),new Error("Auto login failed")}))}},{key:"render",value:function(){return Object(O.jsx)("button",{type:"button",className:"submit-btn",onClick:this.autoLogin,children:"Auto Login (Dev)"})}}]),n}(a.Component);var T=function(e){return Object(O.jsx)("input",{name:"name",type:"text",label:"name",placeholder:"name",className:"form-input",disabled:e.disabled,value:e.value,onChange:e.changeHandler})};var H=function(e){return Object(O.jsx)("input",{name:"email",type:"email",label:"email",placeholder:"email",className:"form-input",disabled:e.disabled,value:e.value,onChange:e.changeHandler})};var M=function(e){return Object(O.jsx)("input",{name:"password",type:"password",label:"password",placeholder:"password",className:"form-input",disabled:e.disabled,value:e.value,onChange:e.changeHandler})};var q=function(e){return Object(O.jsx)("input",{name:"submit",type:"submit",label:"submit",value:e.value||"Submit",disabled:e.disabled,className:e.disabled?" disabled-btn":"submit-btn"})},F=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).fieldComponents={name:T,email:H,password:M},e}return Object(u.a)(n,[{key:"renderChosenFields",value:function(){var e=this;return this.props.fields.map((function(t){if(e.fieldExists(t)){var n=e.getFieldComponent(t);return Object(O.jsx)(n,{value:e.props[t],changeHandler:e.props.changeHandler,disabled:e.fieldIsDisabled(t)},t)}throw new Error("The '".concat(t,"' field does not exists."))}))}},{key:"fieldExists",value:function(e){return e in this.fieldComponents}},{key:"getFieldComponent",value:function(e){return this.fieldComponents[e]}},{key:"fieldIsDisabled",value:function(e){return this.props.disabled.includes(e)}},{key:"renderSubmit",value:function(){return Object(O.jsx)(q,{value:this.props.submit,disabled:this.fieldIsDisabled("submit")})}},{key:"render",value:function(){return Object(O.jsxs)("form",{method:this.props.method,action:this.props.action,onSubmit:this.props.submitHandler,className:"user-form",autoComplete:"off",children:[this.renderChosenFields(),this.renderSubmit()]})}}]),n}(a.Component),G=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{className:"status-msg",children:this.props.message})}}]),n}(a.Component),I=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).fields=["email","password"],a.disabled=[],a.state={status:"",email:"",password:""},a.handleSubmit=a.handleSubmit.bind(Object(L.a)(a)),a.handleChange=a.handleChange.bind(Object(L.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(g.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.login().then((function(e){console.log(e),window.location.href="/"})).catch((function(e){return t.setStatus(e)}))}},{key:"login",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f()({method:"POST",url:"/login",data:{email:this.state.email,password:this.state.password},validateStatus:function(e){return 200===e}});case 3:return t=e.sent,console.log(t),e.abrupt("return",t);case 8:if(e.prev=8,e.t0=e.catch(0),console.log(e.t0),401!==e.t0.response.status){e.next=15;break}throw new Error("Email or password incorrect.");case 15:throw new Error("Unknown login error.");case 16:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"setStatus",value:function(e){this.setState({status:e.message})}},{key:"render",value:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G,{message:this.state.status}),Object(O.jsx)(F,{fields:this.fields,disabled:this.disabled,email:this.state.email,password:this.state.password,submit:"Enter",submitHandler:this.handleSubmit,changeHandler:this.handleChange})]})}}]),n}(a.Component),z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"login-page card",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("h1",{children:"Login"})}),Object(O.jsxs)("div",{className:"main",children:[Object(O.jsx)(I,{}),Object(O.jsx)(U,{})]})]})}}]),n}(a.Component),P=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).fields=["name","email","password"],a.disabled=[],a.state={status:"",name:"",email:"",password:""},a.handleSubmit=a.handleSubmit.bind(Object(L.a)(a)),a.handleChange=a.handleChange.bind(Object(L.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(g.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.register().then((function(){return window.location.href="/login"})).catch((function(e){return t.setStatus(e)}))}},{key:"register",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f()({method:"POST",url:"/sign-up",data:{name:this.state.name,email:this.state.email,password:this.state.password}});case 3:return t=e.sent,e.abrupt("return",t);case 7:if(e.prev=7,e.t0=e.catch(0),409!==e.t0.response.status){e.next=14;break}throw new Error("Email already registered.");case 14:throw new Error("Unknown registration error.");case 15:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"setStatus",value:function(e){this.setState({status:e.message})}},{key:"render",value:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G,{message:this.state.status}),Object(O.jsx)(F,{fields:this.fields,disabled:this.disabled,name:this.state.name,email:this.state.email,password:this.state.password,submit:"Sign Up",submitHandler:this.handleSubmit,changeHandler:this.handleChange})]})}}]),n}(a.Component),B=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"sign-up-page card",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("h1",{children:"Sign Up"})}),Object(O.jsx)("div",{className:"main",children:Object(O.jsx)(P,{})})]})}}]),n}(a.Component),R=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).fields=["name","email","password"],a.state={status:"",name:"",email:"",password:"",disabled:["email","submit"]},a.handleSubmit=a.handleSubmit.bind(Object(L.a)(a)),a.handleChange=a.handleChange.bind(Object(L.a)(a)),a.setStatus=a.setStatus.bind(Object(L.a)(a)),a}return Object(u.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(g.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.setStatus(""),this.editUserInfo().then((function(){return t.setStatus("Successfully saved.")})).catch((function(e){return t.setStatus(e)}))}},{key:"componentDidMount",value:function(){var e=this;this.loadUserInfoToFields().then((function(){return e.enableSubmission()})).catch((function(t){return e.setStatus(t.message)}))}},{key:"editUserInfo",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("/edit",{name:this.state.name,password:this.state.password},{withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Could not save user information.");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadUserInfoToFields",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserInfo();case 2:(t=e.sent)&&this.setState({name:t.name,email:t.email});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/user");case 3:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to load user info.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"enableSubmission",value:function(){this.setState((function(e){return{disabled:e.disabled.filter((function(e){return"submit"!==e}))}}))}},{key:"setStatus",value:function(e){this.setState({status:e})}},{key:"render",value:function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G,{message:this.state.status}),Object(O.jsx)(F,{fields:this.fields,disabled:this.state.disabled,method:"post",action:"/edit",name:this.state.name,email:this.state.email,password:this.state.password,submit:"Save",submitHandler:this.handleSubmit,changeHandler:this.handleChange})]})}}]),n}(a.Component),J=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"edit-page card",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("h1",{children:"Edit Info"})}),Object(O.jsx)("div",{className:"main",children:Object(O.jsx)(R,{})})]})}}]),n}(a.Component),K=(n(76),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return f.a.post("/logout").then(window.location.href="/login"),null}}]),n}(a.Component));n(77);var Q=function(e){return Object(O.jsx)("a",{href:e.path,className:"link-btn",children:e.text})};n(78);var V=function(e){var t=Object(a.useState)(!1),n=Object(y.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)(!1),i=Object(y.a)(c,2),o=i[0],u=i[1],l=function(){window.innerWidth<=640?s(!0):s(!1)};return Object(a.useEffect)((function(){window.addEventListener("resize",l)})),Object(a.useEffect)((function(){window.innerWidth<=640&&s(!0)}),[]),Object(O.jsxs)("div",{children:[Object(O.jsx)("nav",{className:r?"nav-bar close-menu":" nav-bar open-menu",children:Object(O.jsx)("ul",{children:e.isAuthenticated?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(Q,{text:"Home",path:"/"})}),Object(O.jsx)("li",{children:Object(O.jsx)(Q,{text:"Edit User",path:"/edit"})}),Object(O.jsx)("li",{children:Object(O.jsx)(Q,{text:"Previous Scores",path:"/scores"})}),Object(O.jsx)("li",{children:Object(O.jsx)(Q,{text:"Ranking",path:"/ranking"})}),Object(O.jsx)("li",{children:Object(O.jsx)(Q,{text:"Logout",path:"/logout"})})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("li",{children:Object(O.jsx)(Q,{text:"Login",path:"/login"})}),Object(O.jsx)("li",{children:Object(O.jsx)(Q,{text:"Sign Up",path:"/sign-up"})})]})})}),r?Object(O.jsxs)("div",{className:"mobile-menu icon",onClick:function(){s(!r),u(!o)},children:[Object(O.jsx)("div",{className:"menu-icon"}),Object(O.jsx)("div",{className:"menu-icon"}),Object(O.jsx)("div",{className:"menu-icon"})]}):Object(O.jsx)("div",{className:o?"show icon":"hide icon",onClick:function(){s(!r),u(!o)},children:"X"})]})},_=[{id:9,name:"General Knowledge"},{id:10,name:"Entertainment: Books"},{id:11,name:"Entertainment: Film"},{id:12,name:"Entertainment: Music"},{id:13,name:"Entertainment: Musicals & Theatres"},{id:14,name:"Entertainment: Television"},{id:15,name:"Entertainment: Video Games"},{id:16,name:"Entertainment: Board Games"},{id:17,name:"Science & Nature"},{id:18,name:"Science: Computers"},{id:19,name:"Science: Mathematics"},{id:20,name:"Mythology"},{id:21,name:"Sports"},{id:22,name:"Geography"},{id:23,name:"History"},{id:24,name:"Politics"},{id:25,name:"Art"},{id:26,name:"Celebrities"},{id:27,name:"Animals"},{id:28,name:"Vehicles"},{id:29,name:"Entertainment: Comics"},{id:30,name:"Science: Gadgets"},{id:31,name:"Entertainment: Japanese Anime & Manga"},{id:32,name:"Entertainment: Cartoon & Animations"}],W=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={scores:null},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.loadScores().then((function(t){e.setState({scores:t})}))}},{key:"loadScores",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/get-scores",{withCredentials:!0});case 3:return t=e.sent,console.log(t),e.abrupt("return",t.data);case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0),new Error("Unable to fetch scores.");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getTopicName",value:function(e){return _.find((function(t){return t.id===e})).name}},{key:"render",value:function(){var e=this,t=this.state.scores;if(!t)return Object(O.jsx)("p",{children:"No scores to be shown."});var n=t.map((function(t,n){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.points}),Object(O.jsx)("td",{children:new Date(t.date).toLocaleDateString()}),Object(O.jsx)("td",{children:e.getTopicName(t.topic)})]},n)}));return Object(O.jsxs)("table",{className:"table scores-table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"Score"}),Object(O.jsx)("th",{children:"Date"}),Object(O.jsx)("th",{children:"Topic"})]})}),Object(O.jsx)("tbody",{children:n}),Object(O.jsx)("tfoot",{children:Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:"3",children:"End of scores"})})})]})}}]),n}(a.Component),X=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"scores-page card",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("h1",{children:"Previous Scores"})}),Object(O.jsx)("div",{className:"main",children:Object(O.jsx)(W,{})})]})}}]),n}(a.Component),Y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={scores:null,topic:"all"},a.state.scores=a.props.scores,a}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("select",{name:"topic",className:"select-topic",onChange:this.props.changeHandler,value:this.state.topic,children:[Object(O.jsx)("option",{value:"all",children:"------- ALL --------"}),_.map((function(e){return Object(O.jsx)("option",{value:e.id,default:"General Knowledge"===e.name,children:e.name},e.id)}))]})}}]),n}(a.Component),Z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={topic:"all",scores:null},a.handleChange=a.handleChange.bind(Object(L.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.loadScores().then((function(t){e.setState({scores:t})}))}},{key:"handleChange",value:function(e){this.setState({topic:e.target.value})}},{key:"loadScores",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.get("/get-ranking",{withCredentials:!0});case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),console.log(e.t0),new Error("Unable to fetch scores.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getScoresList",value:function(){var e=this,t=this.state.scores;return t?t.filter((function(t){return"all"===e.state.topic||t.topic===Number(e.state.topic)})).sort((function(e,t){return t.points-e.points})).map((function(t,n){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:t.user.name}),Object(O.jsx)("td",{children:t.points}),Object(O.jsx)("td",{children:e.getTopicName(t.topic)})]},n)})):Object(O.jsx)("p",{children:"Loading..."})}},{key:"getTopicName",value:function(e){return _.find((function(t){return t.id===e})).name}},{key:"render",value:function(){var e=this.getScoresList();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(Y,{scores:this.state.scores,topic:this.state.topic,changeHandler:this.handleChange}),Object(O.jsxs)("table",{className:"table ranking-table",children:[Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"User"}),Object(O.jsx)("th",{children:"Score"}),Object(O.jsx)("th",{children:"Topic"})]})}),Object(O.jsx)("tbody",{children:e}),Object(O.jsx)("tfoot",{children:Object(O.jsx)("tr",{children:Object(O.jsx)("td",{colSpan:"3",children:"End of scores"})})})]})]})}}]),n}(a.Component),$=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(O.jsxs)("div",{className:"raking-page card",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("h1",{children:"Rankings"})}),Object(O.jsx)("div",{className:"main",children:Object(O.jsx)(Z,{})})]})}}]),n}(a.Component),ee=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={score:null,validLink:!0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props);var t=this.props.match.params.id;this.getScore(t).then((function(t){e.setState({score:t})})).catch((function(t){console.log(t),e.setState({validLink:!1})}))}},{key:"getScore",value:function(){var e=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/get-score/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=null===(e=this.state.score)||void 0===e?void 0:e.user.name,a=null===(t=this.state.score)||void 0===t?void 0:t.points;return Object(O.jsxs)("div",{className:"share-page card",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("h1",{children:"Quiz App"})}),Object(O.jsxs)("div",{className:"main",children:[this.state.validLink?n&&a&&Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("p",{children:[Object(O.jsx)("strong",{children:n})," reached a score of ",Object(O.jsx)("strong",{children:a})]})}):Object(O.jsx)("p",{children:"Could not retrieve user score."}),Object(O.jsx)("p",{children:"Can you go higher?"}),Object(O.jsx)("p",{children:Object(O.jsx)(i.b,{to:"/",children:"Click here to play"})})]})]})}}]),n}(a.Component),te=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"isAuthenticationChecked",value:function(){return void 0!==this.context}},{key:"isUserAuthenticated",value:function(){return this.context||!1}},{key:"getDefaultPrivateRoute",value:function(){return Object(O.jsx)(h.b,{path:"/",render:function(){return Object(O.jsx)(h.a,{to:"/"})}})}},{key:"getDefaultPublicRoute",value:function(){return Object(O.jsx)(h.b,{path:"/",render:function(){return Object(O.jsx)(h.a,{to:"/login"})}})}},{key:"render",value:function(){if(!this.isAuthenticationChecked())return null;var e=this.isUserAuthenticated();return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)(V,{isAuthenticated:e}),e?Object(O.jsxs)(h.d,{children:[Object(O.jsx)(h.b,{path:"/homepage",component:D}),Object(O.jsx)(h.b,{path:"/quizpage/:type",component:E}),Object(O.jsx)(h.b,{path:"/edit",component:J}),Object(O.jsx)(h.b,{path:"/scores",component:X}),Object(O.jsx)(h.b,{path:"/ranking",component:$}),Object(O.jsx)(h.b,{path:"/share/:id",component:ee}),Object(O.jsx)(h.b,{path:"/logout",component:K}),Object(O.jsx)(h.b,{exact:!0,path:"/",component:D}),this.getDefaultPrivateRoute()]}):Object(O.jsxs)(h.d,{children:[Object(O.jsx)(h.b,{path:"/share/:id",component:ee}),Object(O.jsx)(h.b,{path:"/login",component:z}),Object(O.jsx)(h.b,{path:"/sign-up",component:B}),this.getDefaultPublicRoute()]})]})}}]),n}(a.Component);te.contextType=v;var ne=te;n(79);c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(x,{children:Object(O.jsx)(i.a,{children:Object(O.jsx)(ne,{})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.b9fe3073.chunk.js.map